@arg(){
    local VAL VAR=${1}
    shift
    eval "VAL=\${$VAR}"
    
    if [ $1 != "--" ]; then
        echo "Second parameter should be --, then following the choices" >&2
    fi

    shift

    if [ -n "$_ENV_HELP" ]; then
        echo "Environment Variable $VAR Expecting: $@"
        return 0
    fi

    for i in "$@"; do
        if [ "$VAL" == "$i" ]; then
            return 0
        fi
    done


    echo "Environment Variable $VAR \nExpect: $@ \nBut get: '$VAL'" >&2
    # return 1

    local latest_code=$(trap -p return)
    trap  "$VAR='$1'; eval \"$latest_code\" " RETURN

    return 0
}

@arg.check(){
    while getopts "cfm" option; do
    case ${option} in
        c ) #For option c
        echo "My favorite color is BLUE"
        ;;
        f ) #For option f
        echo "My favorite food is ice-cream"
        ;;
        m ) #For option m
        echo "My favorite movie is titanic"
        ;;
        \? ) #For invalid option
        echo "You have to use: [-c] or [-f] or [-m]"
        ;;
    esac
    done
}





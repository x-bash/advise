# shellcheck shell=bash

# fn.map "echo hi" 1 2 3
# I=? fn.map "echo ? hi" 1 2 3
fn.map(){
    local cmd="$1" I=${I="%"}
    shift
    if [ -n "$I" ] && [[ "$cmd" =~ ^[[:alnum:]-_:+]+$ ]]; then
        for i in "$@"; do
            eval "${cmd/$"$I"/$i}";
        done
        return 0
    fi

    for i in "$@"; do
        eval "$cmd $i";
    done
}

